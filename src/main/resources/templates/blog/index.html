<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	  th:with="blogRoot = ${categoryService.readCategory(109, false, operator).object}">
	<head>
		<meta charset="UTF-8">
		<meta name="Description" th:attr="Content=${blogRoot.intro}">
		<th:block th:with="keywords = ${new java.lang.StringBuilder()}">
			<th:block th:each="sub: ${blogRoot.subCategoryList}" th:with="tmp = ${subStat.first ? keywords.append(sub.name) : keywords.append(',').append(sub.name)}">
				<meta th:if="${subStat.last}" name="keywords" th:attr="Content=${keywords}">
			</th:block>
		</th:block>
		<title>首页-J's Zone</title>
	</head>
	<body th:with="queryPost = ${new com.laputa.laputa_sns.model.entity.Post()},
                    popular = ${T(com.laputa.laputa_sns.service.PostIndexService).POPULAR},
                    latest = ${T(com.laputa.laputa_sns.service.PostIndexService).LATEST},
                    tmp = ${queryPost.setQueryParam(new com.laputa.laputa_sns.common.QueryParam())},
                    tmp = ${queryPost.queryParam.setQueryNum(10)},
                    tmp = ${queryPost.setCategoryId(blogRoot.id)}">
		<li>
			<ul th:each="sub: ${blogRoot.subCategoryList}">
				<a th:text="${sub.name}" th:href="@{'/blog/category_detail/' + ${sub.id}}"></a>
			</ul>
		</li>
		<li th:with="popularList = ${postService.readIndexPostList(queryPost, popular, operator).object}">
			<ul th:each="post: ${popularList}">
				<h2>
					<a th:href="@{'/blog/post_detail/' + ${post.id}}" th:text="${post.title}"></a>
				</h2>
				<p th:text="${post.content}"></p>
			</ul>
		</li>
		<li th:with="latestList = ${postService.readIndexPostList(queryPost, latest, operator).object}">
			<ul th:each="post: ${latestList}">
				<h2>
					<a th:href="@{'/blog/post_detail/' + ${post.id}}" th:text="${post.title}"></a>
				</h2>
				<p th:text="${post.content}"></p>
			</ul>
		</li>
	</body>
</html>